<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Master Pro Max</title>
    <style>
        :root { --bg: #1e1e1e; --text: #d4d4d4; --accent: #4CAF50; }
        body { font-family: sans-serif; margin: 0; background: var(--bg); color: var(--text); height: 100vh; display: flex; flex-direction: column; }
        
        /* Navbar */
        .navbar { background: #333; padding: 10px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--accent); }
        .nav-btns button { background: none; border: 1px solid var(--accent); color: white; padding: 5px 10px; border-radius: 4px; font-size: 12px; }

        .main { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 60px; background: #252526; display: flex; flex-direction: column; border-right: 1px solid #333; }
        .sidebar button { padding: 15px 0; border: none; background: none; color: #888; font-size: 10px; cursor: pointer; }
        .sidebar button.active { color: var(--accent); background: #333; }

        /* Content Area */
        .container { flex: 1; display: flex; flex-direction: column; padding: 10px; position: relative; }
        textarea { flex: 1; background: #1e1e1e; color: #9cdcfe; border: 1px solid #444; padding: 10px; font-family: monospace; border-radius: 5px; outline: none; }
        
        /* Interview Modal */
        #interviewPanel { display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: #252526; z-index: 20; padding: 20px; overflow-y: auto; }
        .q-card { background: #333; padding: 15px; margin-bottom: 10px; border-radius: 8px; border-left: 4px solid var(--accent); }

        /* Login Modal */
        #loginModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; justify-content: center; align-items: center; }
        .login-box { background: #333; padding: 30px; border-radius: 10px; width: 80%; text-align: center; }
        .login-box input { width: 90%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; }
        
        .footer-btns { display: flex; gap: 10px; margin: 10px 0; }
        .btn { border: none; padding: 12px; border-radius: 4px; color: white; cursor: pointer; font-weight: bold; flex: 1; }
        .run-btn { background: var(--accent); }
    </style>
</head>
<body>

    <div class="navbar">
        <span><b>CODE MASTER</b></span>
        <div class="nav-btns">
            <button onclick="showInterview()">ðŸ’¡ Interview</button>
            <button onclick="openLogin()" id="userBtn">ðŸ‘¤ Login</button>
        </div>
    </div>

    <div class="main">
        <div class="sidebar">
            <button onclick="setLang('python')" id="py-btn">Py</button>
            <button onclick="setLang('javascript')" id="js-btn">JS</button>
            <button onclick="setLang('java')" id="java-btn">Java</button>
        </div>

        <div class="container">
            <textarea id="editor" spellcheck="false" placeholder="Write code..."></textarea>
            <div class="footer-btns">
                <button class="btn run-btn" onclick="runCode()">â–¶ RUN</button>
            </div>
            <div id="out" style="height:100px; background:#000; color:#0f0; padding:10px; font-family:monospace; font-size:12px; overflow:auto;">Output...</div>

            <div id="interviewPanel">
                <button onclick="closeInterview()" style="background:red; color:white; border:none; padding:5px 10px; float:right;">Close</button>
                <h2>Interview Questions</h2>
                <div id="qList"></div>
            </div>
        </div>
    </div>

    <div id="loginModal">
        <div class="login-box">
            <h3>Welcome Coder!</h3>
            <input type="email" id="email" placeholder="Email">
            <input type="password" id="pass" placeholder="Password">
            <button class="btn run-btn" onclick="handleLogin()">Login / Signup</button>
            <p onclick="document.getElementById('loginModal').style.display='none'" style="color:#888; cursor:pointer;">Cancel</p>
        </div>
    </div>

    <script>
        let currentLang = 'python';
        const questions = [
            { q: "What is PEP 8 in Python?", a: "PEP 8 is a style guide for Python code." },
            { q: "Difference between '==' and 'is'?", a: "'==' checks value, 'is' checks memory location." },
            { q: "What is a Closure in JS?", a: "A function having access to its parent scope even after the parent function has closed." }
        ];

        function setLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.sidebar button').forEach(b => b.classList.remove('active'));
            document.getElementById(lang + '-btn').classList.add('active');
            document.getElementById('editor').value = localStorage.getItem('code_'+lang) || "";
        }

        // Interview Logic
        function showInterview() {
            const panel = document.getElementById('interviewPanel');
            const list = document.getElementById('qList');
            list.innerHTML = questions.map(item => `
                <div class="q-card">
                    <b>Q: ${item.q}</b><br><br>
                    <small style="color:#aaa;">A: ${item.a}</small>
                </div>
            `).join('');
            panel.style.display = 'block';
        }
        function closeInterview() { document.getElementById('interviewPanel').style.display = 'none'; }

        // Login Logic
        function openLogin() { document.getElementById('loginModal').style.display = 'flex'; }
        function handleLogin() {
            const email = document.getElementById('email').value;
            if(email) {
                localStorage.setItem('user', email);
                document.getElementById('userBtn').innerText = email.split('@')[0];
                document.getElementById('loginModal').style.display = 'none';
                alert("Logged in successfully!");
            }
        }

        // Run Code Logic
        async function runCode() {
            const code = document.getElementById('editor').value;
            document.getElementById('out').innerText = "Running...";
            try {
                const res = await fetch('https://emkc.org/api/v2/piston/execute', {
                    method: 'POST',
                    body: JSON.stringify({ language: currentLang, version: "*", files: [{ content: code }] })
                });
                const data = await res.json();
                document.getElementById('out').innerText = data.run.output || "Done!";
            } catch(e) { document.getElementById('out').innerText = "Error!"; }
        }

        setLang('python');
    </script>
</body>
</html>

